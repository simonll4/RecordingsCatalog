# Dependency Cruiser - Reglas de Arquitectura

Este archivo define las reglas para validar la arquitectura Ports & Adapters.

## Instalación

```bash
npm install --save-dev dependency-cruiser
```

## Uso

```bash
# Validar arquitectura
npm run arch:check

# Generar diagrama de dependencias
npm run arch:graph
```

## Reglas Implementadas

### 1. Core → Solo Ports
El orquestador y FSM solo pueden depender de interfaces (ports), nunca de adapters.

### 2. Adapters → No dependen de Core
Los adapters son plug-ins, no deben conocer el orquestador.

### 3. Ports → No dependen de nada del dominio
Las interfaces son puras, sin dependencias circulares.

### 4. No imports de `_legacy/`
Nadie puede importar archivos deprecados.

### 5. Transforms/Filters → Sin side effects
Funciones puras no pueden depender de infraestructura (solo tipos).

## Ejemplo de Violación

```typescript
// ❌ MAL - Orchestrator importando adapter directamente
import { AIClientTcp } from '../../modules/ai/client/ai-client-tcp.js';

// ✅ BIEN - Orchestrator importando port
import type { AIClient } from '../../modules/ai/index.js';
```

## Ver Configuración

`.dependency-cruiser.cjs` contiene las reglas exactas.
